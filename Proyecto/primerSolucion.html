<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuerza Bruta</title>
    <!--Hojas de estilo-->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="css/fuerzaBruta.css" rel="stylesheet">
    <link rel="preload" href="css/fuerzaBruta.css" as="style"> <!--Hacer el sitio web mas rapido-->
    <link href="css/flecha.css" rel="stylesheet">
    <!--Scripts-->
    <script type="text/javascript">
        
        function obtener() 
        {
            const str1 = document.getElementById("str1").value;
            const str2 = document.getElementById("str2").value;
            const str3 = document.getElementById("str3").value;
            const str4 = document.getElementById("str4").value;
            document.getElementById("palabra1").innerHTML = str1;
            document.getElementById("palabra2").innerHTML = str2;
            document.getElementById("palabra3").innerHTML = str3;
            document.getElementById("palabra4").innerHTML = str4;
        }
    </script>


    <script>
        function moverFlecha(x) {
            var p = (document.getElementById("palabra5").clientWidth - 8) + "px";
            //  alert("= "+p);
            var item = document.getElementById("flechas");

            document.getElementById("flechas").animate([
                // keyframes
                { transform: 'translateX(18px)' },
                { transform: 'translateX(' + p + ')' },
                { transform: 'delay:1s' }
            ], {
                // timing options
                duration: 2000,
                iterations: 1
            });
            //var longitud = document.getElementById("palabra2").style.marginLeft;
        }
    </script>

    <!--****************************************FUNCION DEL ALGORITMO***********************************************************-->
    <script>

        // Funcion para encontrar el prefijo comun entre dos cadenas (str1 & str2)
            //@param1: cada n1 a comparar
            //@param2: cada n2 a comparar
        function prefijoComunDos(str1, str2) {
            //Cadena donde se guardara el valor final
            let result = "";         
            //Obtenemos el tamaño               
            let n1 = str1.length, n2 = str2.length; 
            // Comparar str1 & str2
            for (let i = 0, j = 0; i <= (n1 - 1) && j <= (n2 - 1); i++, j++) {

                if (str1[i] != str2[j])
                    break;
                // Voy concatenando caracter x caracter, para aumentar el prefijo
                result += str1[i]; 

            }

            //Regreso el valor final del prefijo
            return (result);      
        }

        // Funcion que devuelve el prefijo comun mas largo del arreglo de cadenas
            //@param1: el arreglo de caracteres
            //@param2: el tamaño del arreglo
        function prefijoComunMasLargo(arr, n) {

            let prefix = arr[0];

            for (let i = 1; i <= n - 1; i++)
                prefix = prefijoComunDos(prefix, arr[i]);

            //Regreso el prefijo comun mas largo de las n cadenas
            return (prefix);
        }

        //********************************************************************************************************
        // Programa "principal" para probar el algoritmo
        function prefijo() 
        {
            const str1 = document.getElementById("palabra1");
            var contenido1 = str1.innerHTML;
            const str2 = document.getElementById("palabra2");
            var contenido2 = str2.innerHTML;

            let arr = [contenido1, contenido2];
            let n = arr.length;
            let ans = prefijoComunMasLargo(arr, n);

            //Si es mayor a 0, quiere decir que si existe un prefijo comun mas largo
            if (ans.length > 0) {     
                document.getElementById("palabra5").innerHTML = ans;
            }
            else {
                alert("No hay prefijo común");
                return -1;
            }
            return ans.length;
        }
        //********************************************************************************************************

    </script>
    <!--****************************************FUNCION DEL ALGORITMO***********************************************************-->

    <script>

        function mover(x) {

            document.getElementById("flechaI").style.display = "block"
            document.getElementById("flechaD").style.display = "block"
            var l = document.getElementById("palabra2");
            var lon = l.currentStyle || window.getComputedStyle(l);
            var p = lon.marginLeft;
            //if(document.getElementById("str1").value[0]=="m")
            //var q = (x-1) * 20 +15;
            //else
            var w = document.getElementById("palabra1").clientWidth;
            w = w - 15;
            p = parseInt(p, 10) + w + "px";
            //alert("= " +w);
            document.getElementById("flechaD").style.marginLeft = p;

        }
    </script>

    <script>

        function sustituir1() {

            if (prefijo() != -1) {
                document.getElementById("palabra1").innerHTML = document.getElementById("palabra5").innerHTML;
                document.getElementById("palabra2").innerHTML = document.getElementById("palabra3").innerHTML;
                document.getElementById("palabra3").innerHTML = document.getElementById("palabra4").innerHTML;
                document.getElementById("palabra4").innerHTML = "";

                mover(document.getElementById("palabra1").innerHTML.length);
                moverFlecha(prefijo());
                setTimeout(prefijo, 1000);
            }

        }

        function sustituir2() {

            if (prefijo() != -1) {
                document.getElementById("palabra1").innerHTML = document.getElementById("palabra5").innerHTML;
                document.getElementById("palabra2").innerHTML = document.getElementById("palabra3").innerHTML;
                document.getElementById("palabra3").innerHTML = "";

                mover(document.getElementById("palabra1").innerHTML.length);
                moverFlecha(prefijo());
                setTimeout(prefijo, 1000);
            }

        }

        function sustituir3() {

            if (prefijo() != -1) {
                document.getElementById("palabra1").innerHTML = document.getElementById("palabra5").innerHTML;
                document.getElementById("palabra2").innerHTML = "";
                document.getElementById("palabra1").innerHTML = "Prefijo común más largo es: " + document.getElementById("palabra5").innerHTML;
                document.getElementById("palabra5").innerHTML = "";
                document.getElementById("flechaI").style.display = "none";
                document.getElementById("flechaD").style.display = "none";
            }

        }

    </script>

    <script>

        function SoloMinusculas(e){

            key = e.keyCode || e.wich;
            tecla = String.fromCharCode(key).toString();
            letras = "abcdefghijklmnopqrstuvwxyzáéíóú";
            
            especiales = [8];
            tecla_especial = false;

            for(var i in especiales){
                if(key == especiales[i]){
                    tecla_especial = true;
                    break;
                }
            }

            if(letras.indexOf(tecla)== -1 && !tecla_especial){
                alert("Solo detecta minusculas");
                return false;
            }
        }
    
    </script> 

    <script>
        function cambiarDiseñoCodigo(){
            document.getElementById("contenedor-codigos").style.background= "#FFE26B";
            document.getElementById("codigo-uno-1").style.color = "#FFE26B";
            
        }
    </script>

</head>



<body>

    <header class="header">
        <div class="container logo-nav-container">
            <h1>Fuerza Bruta</h1>
            <nav class="navigation">
                <ul>
                    <li><a href="./index.html"> Regresar al menú</a></li>
                </ul>
            </nav>
        </div>
    </header>


    <div class="contenedor">
        <main class="fondo-main">
            <div class="text">
                <h1>Instrucciones</h1>
                <p class="texto-instrucciones"> Inserte las 4 cadenas a comparar y presione el botón comenzar.</p>
                <p class="texto-instrucciones"> NOTA: Las palabras tienen que estar en minusculas.</p>
            </div>

            <br><br>

            <div class="strings">
                <input class="entrada-texto" type="text" name="str1" id="str1" onkeypress="return SoloMinusculas(event);" required>
                <input class="entrada-texto" type="text" name="str2" id="str2" onkeypress="return SoloMinusculas(event);" required>
                <input class="entrada-texto" type="text" name="str3" id="str3" onkeypress="return SoloMinusculas(event);" required>
                <input class="entrada-texto" type="text" name="str4" id="str4" onkeypress="return SoloMinusculas(event);" required>
            </div>

            <br><br>

            <div class="centrar-flex">
                <button class="boton" name="comenzar" type="button" onclick=" 
                obtener(), moverFlecha(prefijo()) , mover(document.getElementById('str1').value.length),setTimeout(prefijo,2000),
                setTimeout(sustituir1,4000),setTimeout(sustituir2,8500), setTimeout(sustituir3,11000);"> Comenzar </button>
            </div>

            <div class="palabras">
                <h1 id="palabra1"></h1>
                <h1 id="palabra2"></h1>
                <h1 id="palabra3"></h1>
                <h1 id="palabra4"></h1>
            </div>
    
            <div id="flechas">
                <div id="flechaI" class="flecha1 derecha"></div>
                <div id="flechaD" class="flecha2 derecha"></div>
            </div>
    
            <div class="palabra-prefijo">
                <h1 id="palabra5"></h1>
            </div>

        </main>


        <!--&nbsp; salto de linea-->
        
        <div class="titulo-explicacion">
            <p>Explicación del Algoritmo</p>
        </div>

        <div class="contenedor-explicacion">

            <div>
                <h2 class="centrar">PASO 1</h2>
                <p class="contenedor-pasos"> Se seleccionan 2 cadenas para que asi se empiece a comparar caracter por
                    caracter,de inicio a fin. </p>
            </div>

            <div>
                <h2 class="centrar">PASO 2</h2>
                <p class="contenedor-pasos">Dichos caracteres serán almacenados en la variable prefix, la cual nos
                    indica el prefijo común más largo hasta el momento.</p>
            </div>

            <div>
                <h2 class="centrar">PASO 3</h2>
                <p class="contenedor-pasos">Si se obtuvo un prefijo con las cadenas utilizadas, dicho prefijo se
                    comparará con la siguiente cadena. &nbsp; Finalmente, se vuelve a repetir el mismo proceso con las cadenas
                    faltantes, que para este ejemplo son 4.</p>
            </div>

        </div><!--.contenedor-explicacion-->


        <div class="contenedor-codigos">

            <div>
                <b><h1 class="titulo-codigo">prefijoComunDos</h1></b>
                <div class="codigo-uno">
                    <p id="codigo-uno-1">function prefijoComunDos(str1,str2)</p>
                    <p id="codigo-uno-2">{</p>
                    <p id="codigo-uno-3">let result = "";</p>
                    <p id="codigo-uno-4">let n1 = str1.length, n2 = str2.length;</p>
                    <p id="codigo-uno-5">for (let i = 0, j = 0; i <= (n1 - 1) && j <=(n2 - 1); i++, j++) { </p>
                    <p id="codigo-uno-6">if (str1[i] != str2[j]) </p>
                    <p id="codigo-uno-7"> break;</p>
                    <p id="codigo-uno-8">result += str1[i];</p>
                    <p id="codigo-uno-9">}</p>
                    <p id="codigo-uno-10">return (result);</p>
                    <p id="codigo-uno-11">}</p>

                </div>
            </div>

            <div>
                <b><h1 class="titulo-codigo">prefijoComunMasLargo</h1></b>
                <div class="codigo-dos">
                    <p id="codigo-dos-1">function prefijoComunMasLargo(arr,n)</p>
                    <p id="codigo-dos-2">{</p>
                    <p id="codigo-dos-3">let prefix = arr[0];</p>
                    <p id="codigo-dos-4">for (let i = 1; i <= n - 1; i++) </p>
                    <p id="codigo-dos-5">prefix = prefijoComunDos(prefix, arr[i]); </p>
                    <p id="codigo-dos-6">return (prefix);</p>
                    <p id="codigo-dos-7">}</p>
                </div>
            </div>

        </div> <!--.contenedor-codigos-->

    </div> <!--.contenedor-->


</body>

</html>


